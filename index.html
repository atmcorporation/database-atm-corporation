<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PT HARAPAN UTAMA PRIMA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <style>
        /* Style sama seperti sebelumnya */
    </style>
</head>
<body>
    <div class="header">
        <img src="https://harapanutama.co.id/assets/images/logo.png" alt="PT Harapan Utama Prima">
        <h1>PT HARAPAN UTAMA PRIMA</h1>
    </div>

    <!-- Login Form -->
    <div class="form-container" id="loginForm">
        <h2>Login</h2>
        <input type="text" id="loginUsername" placeholder="Username">
        <input type="password" id="loginPassword" placeholder="Password">
        <button onclick="login()">Login</button>
        <p>Belum punya akun? <a href="#" onclick="showRegister()">Register</a></p>
    </div>

    <!-- Register Form -->
    <div class="form-container" id="registerForm" style="display: none;">
        <h2>Register</h2>
        <input type="text" id="registerUsername" placeholder="Username">
        <input type="password" id="registerPassword" placeholder="Password">
        <button onclick="register()">Register</button>
        <p>Sudah punya akun? <a href="#" onclick="showLogin()">Login</a></p>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" style="display: none;">
        <h2>Dashboard</h2>
        <button onclick="logout()">Logout</button>
        <button onclick="addEmployee()">Tambah Karyawan</button>
        <table border="1" id="employeeTable">
            <thead>
                <tr>
                    <th>Nama</th>
                    <th>NIK</th>
                    <th>Posisi</th>
                    <th>Service Manager</th>
                    <th>Region</th>
                    <th>Cluster</th>
                    <th>No HP</th>
                    <th>Email</th>
                    <th>No KTP</th>
                    <th>Status Lisensi</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data akan diisi melalui JavaScript -->
            </tbody>
        </table>
    </div>

    <script>
        let employees = JSON.parse(localStorage.getItem("employees")) || [];

        // Tampilkan data karyawan ke tabel
        function displayEmployees() {
            const tbody = document.querySelector("#employeeTable tbody");
            tbody.innerHTML = ""; // Bersihkan isi tabel

            employees.forEach((employee, index) => {
                const row = `
                    <tr>
                        <td>${employee.nama}</td>
                        <td>${employee.nik}</td>
                        <td>${employee.position}</td>
                        <td>${employee.serviceManager}</td>
                        <td>${employee.region}</td>
                        <td>${employee.cluster}</td>
                        <td>${employee.noHp}</td>
                        <td>${employee.email}</td>
                        <td>${employee.noKtp}</td>
                        <td>${employee.statusLisensi}</td>
                        <td>
                            <button onclick="editEmployee(${index})">Edit</button>
                            <button onclick="deleteEmployee(${index})">Hapus</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Tambah karyawan baru
        function addEmployee() {
            const nama = prompt("Nama:");
            const nik = prompt("NIK:");
            const position = prompt("Posisi:");
            const serviceManager = prompt("Service Manager:");
            const region = prompt("Region:");
            const cluster = prompt("Cluster:");
            const noHp = prompt("No HP:");
            const email = prompt("Email:");
            const noKtp = prompt("No KTP:");
            const statusLisensi = prompt("Status Lisensi (Not Yet/Completed):");

            employees.push({
                nama,
                nik,
                position,
                serviceManager,
                region,
                cluster,
                noHp,
                email,
                noKtp,
                statusLisensi,
            });

            localStorage.setItem("employees", JSON.stringify(employees));
            displayEmployees();
        }

        // Edit data karyawan
        function editEmployee(index) {
            const employee = employees[index];

            const nama = prompt("Nama:", employee.nama);
            const nik = prompt("NIK:", employee.nik);
            const position = prompt("Posisi:", employee.position);
            const serviceManager = prompt("Service Manager:", employee.serviceManager);
            const region = prompt("Region:", employee.region);
            const cluster = prompt("Cluster:", employee.cluster);
            const noHp = prompt("No HP:", employee.noHp);
            const email = prompt("Email:", employee.email);
            const noKtp = prompt("No KTP:", employee.noKtp);
            const statusLisensi = prompt(
                "Status Lisensi (Not Yet/Completed):",
                employee.statusLisensi
            );

            employees[index] = {
                nama,
                nik,
                position,
                serviceManager,
                region,
                cluster,
                noHp,
                email,
                noKtp,
                statusLisensi,
            };

            localStorage.setItem("employees", JSON.stringify(employees));
            displayEmployees();
        }

        // Hapus data karyawan
        function deleteEmployee(index) {
            if (confirm("Yakin ingin menghapus data ini?")) {
                employees.splice(index, 1);
                localStorage.setItem("employees", JSON.stringify(employees));
                displayEmployees();
            }
        }

        // Fungsi login/logout dan navigasi sama seperti sebelumnya

        function showDashboard() {
            displayEmployees();
            document.getElementById("dashboard").style.display = "block";
            document.getElementById("loginForm").style.display = "none";
            document.getElementById("registerForm").style.display = "none";
        }
    </script>
</body>
</html>
